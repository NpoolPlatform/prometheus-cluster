alertmanager:
  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: "traefik-internet-vpn"
      traefik.ingress.kubernetes.io/router.entrypoints: websecure, web
      traefik.ingress.kubernetes.io/router.middlewares: kube-system-common-headers@kubernetescrd
    hosts:
     - "alertmanager.internal-devops.${TARGET_ENV}.npool.top"
    path: /
  config:
    global:
      resolve_timeout: 5m
    route:
      group_by: [ 'job' ]
      group_wait: 30s
      group_interval: 5m
      repeat_interval: 12h
      receiver: 'null'
      routes:
        - receiver: 'null'
          matchers:
            - alertname =~ "InfoInhibitor|Watchdog"
    receivers:
      - name: 'wechat'
      wechat_configs:
        - send_resolved: false
          corp_id: 'ww77d915fa93e958d0'
          to_user: '@all'
          to_party: '苏宁'
          message: '{{ template "wechat.default.message" . }}'
          agent_id: '1000002'
          api_secret: 'zZ4TkwZISYEPErgRjxt3JsHMMXIGPjZWBMYLyJg4hPE'
    templates:
      - '/etc/alertmanager/config/*.tmpl'

grafana:
  adminPassword: ${GRAFANA_PASSWORD}
  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: "traefik-internet-vpn"
      traefik.ingress.kubernetes.io/router.entrypoints: websecure, web
      traefik.ingress.kubernetes.io/router.middlewares: kube-system-common-headers@kubernetescrd
    hosts:
      - "grafana.internal-devops.${TARGET_ENV}.npool.top"
    path: /
  image:
    repository: grafana/grafana
    tag: "8.5.5"

prometheus:
  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: "traefik-internet-vpn"
      traefik.ingress.kubernetes.io/router.entrypoints: websecure, web
      traefik.ingress.kubernetes.io/router.middlewares: kube-system-common-headers@kubernetescrd
    hosts:
      - "prometheus.internal-devops.${TARGET_ENV}.npool.top"
    path: /